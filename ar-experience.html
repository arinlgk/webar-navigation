
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Navigation with Google Maps</title>
    
    <!-- Import A-Frame and AR.js -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://rawcdn.githack.com/AR-js-org/AR.js/3.3.2/aframe/build/aframe-ar-nft.js"></script>
    
    <!-- Import Google Maps JavaScript API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAOTV66tI0QlIdaPfmKqRGe1EAidmfV2bY"></script>

    <style>
        body { margin: 0; overflow: hidden; font-family: Arial, sans-serif; }
        #map { height: 100px; width: 100%; position: absolute; top: 10px; z-index: 999; }
        #info { position: absolute; bottom: 10px; left: 10px; z-index: 999; color: white; font-size: 1.2em; }
    </style>
</head>
<body>
    <!-- AR.js Scene -->
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false; gpsMinDistance: 10;">
        <!-- Camera setup -->
        <a-camera gps-camera rotation-reader></a-camera>

        <!-- Example AR Navigation Arrow -->
        <a-entity 
            gps-entity-place="latitude: 3.5424; longitude: 103.4251"
            geometry="primitive: cone; radiusBottom: 0.5; height: 1"
            material="color: red"
            scale="1 1 1"
            rotation="-90 0 0">
        </a-entity>
    </a-scene>

    <!-- Google Maps Container -->
    <div id="map"></div>
    <div id="info">Searching for your destination...</div>

    <!-- Script -->
    <script>
        let map;
        let userLat = 3.5424, userLng = 103.4251; // Default user location (fallback)

        // Load Google Map
        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: userLat, lng: userLng },
                zoom: 14
            });
            
            // Mark user's location
            new google.maps.Marker({
                position: { lat: userLat, lng: userLng },
                map: map,
                title: "You are here"
            });

            // Place AR navigation objects
            placeARNavigation();
        }

        // Function to Place AR.js Navigation Arrow
        function placeARNavigation() {
            const destinationLat = 3.5430; // Example destination latitude
            const destinationLng = 103.4280; // Example destination longitude
            
            document.querySelector('a-entity').setAttribute('gps-entity-place', 
                `latitude: ${destinationLat}; longitude: ${destinationLng}`);
            
            document.getElementById('info').textContent = "Destination set. Follow the arrow!";
        }

        // Update User Location Using Geolocation API
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(position => {
                userLat = position.coords.latitude;
                userLng = position.coords.longitude;
                initMap();
            }, () => {
                alert("Unable to fetch location. Using default coordinates.");
                initMap();
            });
        } else {
            alert("Geolocation not supported. Using default coordinates.");
            initMap();
        }
    </script>
</body>
</html>
